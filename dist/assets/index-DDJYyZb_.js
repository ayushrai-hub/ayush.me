import{c as $,r as e}from"./index-DWV0v9AV.js";import{u as v,f as O,a as U,P as b,L as q}from"./motion-eS8bUrzY.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=$("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);function I(){const n=e.useRef(!1);return v(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function B(){const n=I(),[s,t]=e.useState(0),r=e.useCallback(()=>{n.current&&t(s+1)},[s]);return[e.useCallback(()=>O.postRender(r),[r]),s]}class H extends e.Component{getSnapshotBeforeUpdate(s){const t=this.props.childRef.current;if(t&&s.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function S({children:n,isPresent:s}){const t=e.useId(),r=e.useRef(null),h=e.useRef({width:0,height:0,top:0,left:0});return e.useInsertionEffect(()=>{const{width:d,height:l,top:a,left:m}=h.current;if(s||!r.current||!d||!l)return;r.current.dataset.motionPopId=t;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${l}px !important;
            top: ${a}px !important;
            left: ${m}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[s]),e.createElement(H,{isPresent:s,childRef:r,sizeRef:h},e.cloneElement(n,{ref:r}))}const w=({children:n,initial:s,isPresent:t,onExitComplete:r,custom:h,presenceAffectsLayout:d,mode:l})=>{const a=U(T),m=e.useId(),f=e.useMemo(()=>({id:m,initial:s,isPresent:t,custom:h,onExitComplete:o=>{a.set(o,!0);for(const c of a.values())if(!c)return;r&&r()},register:o=>(a.set(o,!1),()=>a.delete(o))}),d?void 0:[t]);return e.useMemo(()=>{a.forEach((o,c)=>a.set(c,!1))},[t]),e.useEffect(()=>{!t&&!a.size&&r&&r()},[t]),l==="popLayout"&&(n=e.createElement(S,{isPresent:t},n)),e.createElement(b.Provider,{value:f},n)};function T(){return new Map}function V(n){return e.useEffect(()=>()=>n(),[])}const p=n=>n.key||"";function A(n,s){n.forEach(t=>{const r=p(t);s.set(r,t)})}function D(n){const s=[];return e.Children.forEach(n,t=>{e.isValidElement(t)&&s.push(t)}),s}const j=({children:n,custom:s,initial:t=!0,onExitComplete:r,exitBeforeEnter:h,presenceAffectsLayout:d=!0,mode:l="sync"})=>{const a=e.useContext(q).forceRender||B()[0],m=I(),f=D(n);let o=f;const c=e.useRef(new Map).current,y=e.useRef(o),E=e.useRef(new Map).current,R=e.useRef(!0);if(v(()=>{R.current=!1,A(f,E),y.current=o}),V(()=>{R.current=!0,E.clear(),c.clear()}),R.current)return e.createElement(e.Fragment,null,o.map(i=>e.createElement(w,{key:p(i),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:d,mode:l},i)));o=[...o];const g=y.current.map(p),k=f.map(p),L=g.length;for(let i=0;i<L;i++){const u=g[i];k.indexOf(u)===-1&&!c.has(u)&&c.set(u,void 0)}return l==="wait"&&c.size&&(o=[]),c.forEach((i,u)=>{if(k.indexOf(u)!==-1)return;const M=E.get(u);if(!M)return;const F=g.indexOf(u);let x=i;if(!x){const K=()=>{c.delete(u);const z=Array.from(E.keys()).filter(C=>!k.includes(C));if(z.forEach(C=>E.delete(C)),y.current=f.filter(C=>{const P=p(C);return P===u||z.includes(P)}),!c.size){if(m.current===!1)return;a(),r&&r()}};x=e.createElement(w,{key:p(M),isPresent:!1,onExitComplete:K,custom:s,presenceAffectsLayout:d,mode:l},M),c.set(u,x)}o.splice(F,0,x)}),o=o.map(i=>{const u=i.key;return c.has(u)?i:e.createElement(w,{key:p(i),isPresent:!0,presenceAffectsLayout:d,mode:l},i)}),e.createElement(e.Fragment,null,c.size?o:o.map(i=>e.cloneElement(i)))};export{j as A,_ as E};
